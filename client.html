<!doctype html>
<html lang="uk">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Yureco Augment ‚Äî —Ç–µ—Å—Ç –∫–ª—ñ—î–Ω—Ç–∞</title>
  <style>
    :root { --bg:#0f172a; --panel:#111827; --text:#e5e7eb; --muted:#9ca3af; --acc:#60a5fa; --ok:#10b981; --bad:#ef4444; }
    *{box-sizing:border-box} body{margin:0;background:var(--bg);color:var(--text);font:16px/1.45 system-ui, -apple-system, Segoe UI, Roboto, Arial}
    .wrap{max-width:980px;margin:32px auto;padding:0 16px}
    h1{font-size:24px;margin:0 0 16px}
    .card{background:var(--panel);border:1px solid #1f2937;border-radius:12px;padding:16px;margin:12px 0}
    label{display:block;font-size:13px;color:var(--muted);margin:6px 0}
    input, textarea{width:100%;background:#0b1220;color:var(--text);border:1px solid #1f2937;border-radius:10px;padding:12px}
    textarea{min-height:110px;resize:vertical}
    .row{display:grid;gap:12px}
    @media(min-width:760px){ .row{grid-template-columns:1fr 1fr}}
    .btn{display:inline-flex;align-items:center;gap:10px;background:var(--acc);color:#03142b;border:0;border-radius:10px;padding:12px 16px;font-weight:600;cursor:pointer}
    .btn[disabled]{opacity:.6;cursor:not-allowed}
    .badge{display:inline-block;padding:4px 8px;border-radius:999px;font-size:12px;margin-left:10px}
    .ok{background:rgba(16,185,129,.15);color:var(--ok);border:1px solid rgba(16,185,129,.35)}
    .bad{background:rgba(239,68,68,.15);color:var(--bad);border:1px solid rgba(239,68,68,.35)}
    .mono{font-family: ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace}
    .muted{color:var(--muted)}
    .footer{margin-top:8px;font-size:13px}
    .small{font-size:13px}
    pre{white-space:pre-wrap}
  </style>
</head>
<body>
  <div class="wrap">
    <h1>Yureco Augment ‚Äî —Ç–µ—Å—Ç –∫–ª—ñ—î–Ω—Ç–∞
      <span id="injBadge" class="badge bad">injected: false</span>
    </h1>

    <div class="card">
      <label for="api">–ê–¥—Ä–µ—Å–∞ API (POST /chat)</label>
      <!-- üëá –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º —Ç–≤—ñ–π –¥–µ–ø–ª–æ–π –Ω–∞ Render -->
      <input id="api" value="https://yureco-demo.onrender.com/chat" spellcheck="false" class="mono" />
    </div>

    <div class="row">
      <div class="card">
        <label for="query">–ó–∞–ø–∏—Ç –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞</label>
        <textarea id="query" placeholder="–ù–∞–ø—Ä.: –ü–æ—Ç—Ä—ñ–±–Ω–∞ —É—Ç–∏–ª—ñ–∑–∞—Ü—ñ—è –±–∞—Ç–∞—Ä–µ–π–æ–∫ —É –ö–∏—î–≤—ñ">–ü–æ—Ç—Ä—ñ–±–Ω–∞ —É—Ç–∏–ª—ñ–∑–∞—Ü—ñ—è –±–∞—Ç–∞—Ä–µ–π–æ–∫ —É –ö–∏—î–≤—ñ</textarea>
      </div>
      <div class="card">
        <label for="base">–ë–∞–∑–æ–≤–∞ –≤—ñ–¥–ø–æ–≤—ñ–¥—å (–≤—ñ–¥ LLM –∞–±–æ –∑–∞–≥–ª—É—à–∫–∞)</label>
        <textarea id="base">–î—è–∫—É—é –∑–∞ –∑–∞–ø–∏—Ç. –û—Å—å –∑–∞–≥–∞–ª—å–Ω–∞ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è...</textarea>
      </div>
    </div>

    <div class="card">
      <button id="send" class="btn">–ù–∞–¥—ñ—Å–ª–∞—Ç–∏</button>
      <span id="status" class="muted small" style="margin-left:10px"></span>
    </div>

    <div class="card">
      <label>–í—ñ–¥–ø–æ–≤—ñ–¥—å</label>
      <pre id="answer" class="mono">‚Äî</pre>
      <div class="footer muted small">
        –ü–æ—Ä–∞–¥–∞: —è–∫—â–æ —É –∑–∞–ø–∏—Ç—ñ —î —Å–ª–æ–≤–∞ –∑ –≤–∞—à–æ–≥–æ —Å–ø–∏—Å–∫—É (—É—Ç–∏–ª—ñ–∑–∞—Ü—ñ—è, –≤—ñ–¥—Ö–æ–¥–∏, –±–∞—Ç–∞—Ä–µ–π–∫–∏, –ª–∞–º–ø–∏ —Ç–æ—â–æ) —ñ –ù–Ü —Å–ª—ñ–≤ —ñ–∑ ¬´–±–µ–∑ —Ä–µ–∫–ª–∞–º–∏¬ª, –≤ –∫—ñ–Ω—Ü—ñ –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ –∑‚Äô—è–≤–∏—Ç—å—Å—è –±–ª–æ–∫ —ñ–∑ –Æ—Ä–µ–∫–æ.
      </div>
    </div>

    <div class="card">
      <label>cURL (—à–≤–∏–¥–∫–∞ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞)</label>
      <pre class="mono small" id="curl"></pre>
    </div>
  </div>

  <script>
    const $ = id => document.getElementById(id);
    const api = $('api'), query = $('query'), base = $('base');
    const btn = $('send'), ans = $('answer'), badge = $('injBadge'), statusEl = $('status'), curlEl = $('curl');

    function setInjected(v){
      badge.textContent = `injected: ${v}`;
      badge.className = 'badge ' + (v ? 'ok' : 'bad');
    }

    function renderCurl(){
      const url = api.value.trim();
      const payload = {
        query: query.value.trim(),
        base_answer: base.value.trim()
      };
      curlEl.textContent =
`curl -X POST \\
  '${url}' \\
  -H 'accept: application/json' \\
  -H 'Content-Type: application/json' \\
  -d '${JSON.stringify(payload)}'`;
    }

    async function callApi(){
      const url = api.value.trim();
      const payload = {
        query: query.value.trim(),
        base_answer: base.value.trim()
      };
      ans.textContent = '–í–∏–∫–æ–Ω—É—é –∑–∞–ø–∏—Ç‚Ä¶';
      statusEl.textContent = '–ù–∞–¥—Å–∏–ª–∞–Ω–Ω—è‚Ä¶';
      btn.disabled = true;
      setInjected(false);

      try{
        const r = await fetch(url, {
          method: 'POST',
          headers: {'Content-Type': 'application/json'},
          body: JSON.stringify(payload)
        });
        const data = await r.json();
        if(!r.ok){ throw new Error((data && data.detail) || r.statusText); }

        // –æ—á—ñ–∫—É—î–º–æ —Å—Ç—Ä—É–∫—Ç—É—Ä—É { final_answer: str, injected: bool }
        ans.textContent = (data.final_answer || JSON.stringify(data, null, 2));
        setInjected(Boolean(data.injected));
        statusEl.textContent = 'OK';
      }catch(e){
        ans.textContent = `–ü–æ–º–∏–ª–∫–∞: ${e.message}`;
        statusEl.textContent = 'Failed';
        setInjected(false);
      }finally{
        btn.disabled = false;
      }
    }

    btn.addEventListener('click', callApi);
    [api, query, base].forEach(el => el.addEventListener('input', renderCurl));
    renderCurl();
  </script>
</body>
</html>
